<script type="text/ruby" id="ex-ruby-structure">
# No default program structure, execution begins immediately
puts 'Hello world'
</script>
      
<script type="text/ruby" id="ex-ruby-control">
null_var = nil
true_var = true
false_var = false

if condition
  puts "Condition set"
elsif other_condition
  puts "Other condition set"
else
  puts "Fell through"
end
  
value = condition ? "Condition is truthy!" : "Condition is falsy!"
</script>

<script type="text/ruby" id="ex-ruby-function">
# Ruby does not support overloading and if parameters are declared, they must be passed
# Ruby is pass by value, though when the value refers to an object, the object may be modified

# Increments the given integer local to the function
def increment(x)
  x += 1
end

def add_concat(terms)
  terms.push(terms.join(""))
end

# This would be a runtime error: add_concat()

# Ruby will automatically return the last value in a function
</script>

<script type="text/ruby" id="ex-ruby-var">
# Variables have block scope
def say_hello
  str = "hello"
  puts str
end
</script>

<script type="text/ruby" id="ex-ruby-string">
# Strings are mutable
str = "bananas"
str[0] = "m"

# They support basic variable interpolation
strstr = "let's go #{str}"

# Concatenation via + operator
strcat = "hello " + "world"

# Also works as strstr.size
puts strstr.length

# Subscripting to get specific character in Ruby 1.9+, earlier versions need .chr
puts strstr[0]

# IndexOf; returns nil if not found
puts strstr.index('ba')

# Start index, length; also works as strstr[0, 3]
puts strstr.slice(0, 3)

words = strstr.split(' ')
puts words.join(' ')

puts strstr.gsub('ban', 'can')
</script>

<script type="text/ruby" id="ex-ruby-map">
# Given a list of string terms, finds the one that occurs most often
def most_common_term(terms)
  term_map = {}
  terms.each do |term|
    # Alternatively, you can simply test term_map[term]
    if term_map.key?(term)
      term_map[term] += 1
    else
      term_map[term] = 1
    end
  end

  max = 0
  result = nil
  term_map.each do |term, count|
    result, max = [term, count] if count > max
  end

  term_map.delete(result);

  result
end
</script>

<script type="text/ruby" id="ex-ruby-class">
class MyClass
  # Static variables start with @@
  @@id = 'MyClass'

  # Shorthand to define an instance variable with getter and setter
  attr_accessor :prop

  def initialize(count, prop)
    # Instance variables start with @, are implicitly private and declared dynamically
    @count = count

    # Equivalent to @prop = prop
    self.prop = prop
  end
end

mc = MyClass.new(1, "hello")
puts mc.prop
</script>

<script type="text/ruby" id="ex-ruby-regex">
subject = "hello world"
match = /^hello/.match(subject)

if (match)
  puts match[0]
end

# Substitution
puts subject.gsub(/^(\w+) (\w+)/i, '\2 \1')
</script>

<script type="text/ruby" id="ex-ruby-io2">
File.open('strings.txt').each do |line|
  puts "#{line.chomp}"
end
</script>